
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://down-3ud.pages.dev/silly/lorebook/">
      
      
        <link rel="prev" href="../pc/">
      
      
        <link rel="next" href="../../get_ai/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>世界书相关 - 类脑宝宝教程</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="类脑宝宝教程" class="md-header__button md-logo" aria-label="类脑宝宝教程" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            类脑宝宝教程
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              世界书相关
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preferenceocs/"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preferenceocs/" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/songdaopi/down" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    songdaopi/down
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
    
  
  首页

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../build/" class="md-tabs__link">
          
  
    
  
  搭建部署

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  酒馆使用

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../get_ai/" class="md-tabs__link">
          
  
    
  
  获取ai渠道

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../leinao_about/" class="md-tabs__link">
          
  
    
  
  类脑和dc相关

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="类脑宝宝教程" class="md-nav__button md-logo" aria-label="类脑宝宝教程" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    类脑宝宝教程
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/songdaopi/down" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    songdaopi/down
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../.." class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    首页
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            首页
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../build/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    搭建部署
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            搭建部署
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../build/silly/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows本地部署酒馆与clewd教程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../build/gitdesk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    通过 Github Desktop 在PC本地安装酒馆/Clewd/YouChat_Proxy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../build/vps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VPS 云端部署酒馆与Clewd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../build/dock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    傻瓜式图文教程:SillyTavern Docker 一键部署教程,开箱即用的容器版酒馆！
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    酒馆使用
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            酒馆使用
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tavern/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    酒馆介绍——萌新向
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../up/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VPS酒馆更新
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../char/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    正确导入/导出更新后角色卡的方法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../css/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    前端卡问题自查教程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../que/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    酒馆常见问题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    解放双手: 用移动设备连接搭建在PC端的酒馆
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    世界书相关
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    世界书相关
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 功能简介
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2. 基础操作
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 基础操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 导入导出
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 重命名和删除
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 设置世界书
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3 设置世界书">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.1 设置全局世界书
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.2 设置角色世界书
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.3 自带绑定的角色世界书
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#234" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.4 世界书跟随角色卡导出
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#235" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.5 解除绑定世界书
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 创建世界书
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3. 进阶使用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 进阶使用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 上下文的概念
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1 上下文的概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311-prompt" class="md-nav__link">
    <span class="md-ellipsis">
      3.1.1 提示 (Prompt)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#312-prompt" class="md-nav__link">
    <span class="md-ellipsis">
      3.1.2 Prompt 在上下文中的顺序
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 条目参数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 条目参数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#322-depth" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.2 插入深度 (Depth)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323-order" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.3 插入顺序 (Order)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#324-trigger" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.4 概率 (Trigger %)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#325-status" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.5 状态 (Status)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#326" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.6 其他条目参数
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 总体参数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.3 总体参数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#331" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.1 角色背景插入策略
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#332-scan-depth" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.2 扫描深度 (Scan Depth)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#333-recursive-scanning" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.3 递归扫描 (Recursive scanning)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#335" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.5 其他总体参数
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 搭配正则表达式
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../get_ai/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    获取ai渠道
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            获取ai渠道
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../get_ai/clewd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Clewd报错大全
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../get_ai/pro_refund/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pro退款流教程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../get_ai/Gemini/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gemini（哈基米）模型介绍、获取和使用教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../leinao_about/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    类脑和dc相关
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            类脑和dc相关
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leinao_about/make_card/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    一种通用制卡思路
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../leinao_about/discord/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Discord的特殊用法
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 功能简介
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2. 基础操作
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 基础操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 导入导出
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 重命名和删除
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 设置世界书
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3 设置世界书">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.1 设置全局世界书
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.2 设置角色世界书
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.3 自带绑定的角色世界书
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#234" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.4 世界书跟随角色卡导出
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#235" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.5 解除绑定世界书
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 创建世界书
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3. 进阶使用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 进阶使用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 上下文的概念
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1 上下文的概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311-prompt" class="md-nav__link">
    <span class="md-ellipsis">
      3.1.1 提示 (Prompt)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#312-prompt" class="md-nav__link">
    <span class="md-ellipsis">
      3.1.2 Prompt 在上下文中的顺序
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 条目参数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 条目参数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#322-depth" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.2 插入深度 (Depth)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323-order" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.3 插入顺序 (Order)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#324-trigger" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.4 概率 (Trigger %)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#325-status" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.5 状态 (Status)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#326" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.6 其他条目参数
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 总体参数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.3 总体参数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#331" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.1 角色背景插入策略
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#332-scan-depth" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.2 扫描深度 (Scan Depth)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#333-recursive-scanning" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.3 递归扫描 (Recursive scanning)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#335" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.5 其他总体参数
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 搭配正则表达式
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="_1">世界书</h1>
<div class="admonition note">
<p class="admonition-title">作者：@破坏轨道</p>
</div>
<h2 id="1">1. 功能简介</h2>
<div class="admonition info">
<p class="admonition-title">世界书 (Lorebooks)旨在为你的角色卡提供更为完整的背景信息。</p>
<p>它的功能类似于【词典】或【百科】：</p>
<p>比如你正在玩一张<strong>海绵宝宝</strong>的角色卡，你发送一段话：“<strong>海绵宝宝出发去蟹堡王工作。</strong>”这时claude可能无法理解“蟹堡王”是什么。</p>
<p>而如果你有以下世界书：
<img alt="img" loading="lazy" src="1.jpeg" /></p>
<p>这时，你发送的话中的“蟹堡王”三个字会触发世界书，claude就能够理解蟹堡王是一家快餐店。</p>
</div>
<p><strong>世界书的最基本使用方式是【触发】，即以关键词 (Keywords) 触发内容 (Content)</strong></p>
<h2 id="2">2. 基础操作</h2>
<p>你可以下载别人的世界书<a href="https://discord.com/invite/B7Wr25Z7BZ">（类脑Discord频道）</a>，
也可以<a href="https://sqivg8d05rm.feishu.cn/docx/P2QrdeUbToJMBYxeLCQcEBfLnGg#doxcnKxSujFw78ImTUfthntXOZC">创建自己的世界书</a>。仅通过本节内容，
你就能学会世界书最基本的操作方法。</p>
<div class="admonition warning">
<p class="admonition-title">注意</p>
<p>如果你已经会导入、绑定、创建等基础操作，请跳转至进阶使用继续阅读。</p>
</div>
<h3 id="21">2.1 导入导出</h3>
<div class="admonition info">
<p class="admonition-title">条目</p>
<p>本条目是指手动导入世界书，导入角色卡自带世界书的情况参见下文的自带绑定的角色世界书。</p>
</div>
<ol>
<li>
<p>在导入之前，先确认你下载的世界书的格式。世界书和破限一样，后缀是<strong>.json</strong>。</p>
</li>
<li>
<p>打开酒馆，点击页面并导入json文件。</p>
</li>
</ol>
<p><img alt="img" loading="lazy" src="2.jpeg" /></p>
<ol>
<li>导入成功后，下滑页面，就可以看到作者所创建的世界书了。</li>
</ol>
<p><img alt="img" loading="lazy" src="3.jpeg" />.</p>
<p>点击<strong>左侧的小箭头</strong>，可以打开查看每一条目的详细信息。一般来说，新手下载世界书后无需进行修改。</p>
<h3 id="22">2.2 重命名和删除</h3>
<p>如果你下载的世界书是中文命名的，
那么导入酒馆后会转换成一串字符。</p>
<p>数字和英文则不会发生变化。因此有时我们需要重命名世界书。如果不需要该世界书，则可以删除。</p>
<p><img alt="img" loading="lazy" src="4.jpeg" /></p>
<h3 id="23">2.3 设置世界书</h3>
<div class="admonition warning">
<p class="admonition-title">提示</p>
<p>我们手动下载的世界书分为两类，【全局世界书】和【角色世界书】。</p>
<blockquote>
<p>全局世界书：对你的所有角色卡都起效，例如武器大全、服装大全等。</p>
<p>角色世界书：只对它绑定的角色卡起效，例如海绵宝宝的故事背景。</p>
</blockquote>
</div>
<h4 id="231">2.3.1 设置全局世界书</h4>
<ul>
<li>点击后弹出世界书选项框</li>
</ul>
<p><img alt="img" loading="lazy" src="5.jpeg" /></p>
<ul>
<li>勾选你想使用的全局世界书</li>
</ul>
<p><img alt="img" loading="lazy" src="6.jpeg" /></p>
<ul>
<li>勾选后，安卓版会显示项数，电脑版会显示世界书名称</li>
</ul>
<p><img alt="img" loading="lazy" src="7.jpeg" /></p>
<h4 id="232">2.3.2 设置角色世界书</h4>
<p>角色世界书需要绑定角色卡，步骤不同于全局世界书。我们首先切换到<strong>角色卡界面</strong>：</p>
<p><img alt="img" loading="lazy" src="8.jpeg" />
<img alt="img" loading="lazy" src="9.jpeg" />
<img alt="img" loading="lazy" src="10.jpeg" /></p>
<p>点击OK，我们会看到角色卡界面的小地球变绿了，</p>
<p>这说明世界书和角色卡绑定成功了🎉。再次点击绿色小地球，酒馆会跳转到世界书页面。</p>
<h4 id="233">2.3.3 自带绑定的角色世界书</h4>
<p>有一些角色卡是自带绑定的，我们导入卡后，点击角色卡，就会收到一条提示，点击<strong>Yes</strong>即可。然后该卡会<strong>自动创建相应的世界书</strong>并自动绑定。</p>
<h4 id="234">2.3.4 世界书跟随角色卡导出</h4>
<p>如果你希望把带世界书的角色卡分享给其他人玩，那么先确保你的角色卡界面的小地球是绿色状态，然后直接导出角色卡即可。</p>
<h4 id="235">2.3.5 解除绑定世界书</h4>
<p>解除全局世界书的作用，只需在相应选项框中取消勾选即可。然而有的朋友可能会发现，</p>
<p>角色世界书无法通过再次点击小地球解除绑定：点击后会跳转至世界书页面。</p>
<p>要解除角色世界书的绑定，我们需要点击小地球下方的“更多…”选项框。</p>
<p><img alt="img" loading="lazy" src="11.jpeg" /></p>
<p><img alt="img" loading="lazy" src="12.jpeg" /></p>
<h3 id="24">2.4 创建世界书</h3>
<p>更多时候，我们无法找到满意的世界书，这时就需要自己创建世界书或创建条目了。</p>
<ol>
<li>
<p>来到世界书页面，点击“🌏New”图标，创建新世界书，并为你的世界书命名。
<img alt="img" loading="lazy" src="13.jpg" /> </p>
</li>
<li>
<p>创建成功后，点击工具栏中的➕，创建新条目。其他图标的作用会稍后介绍。
<img alt="img" loading="lazy" src="14.jpg" /> </p>
</li>
<li>
<p>点击左侧小箭头打开条目明细。</p>
</li>
</ol>
<p><img alt="img" loading="lazy" src="15.jpg" /> </p>
<ol>
<li>填写关键词和内容。注意，如果你希望多个关键词都指向一个内容，那么你需要用英文半角“,”将这些关键词隔开。（不明白什么是半角的去百度）</li>
</ol>
<p><img alt="img" loading="lazy" src="16.jpg" /> </p>
<ol>
<li>
<p>其他图标。这些图标不是特别常用</p>
</li>
<li>
<p>同时展开所有条目的细则。</p>
</li>
<li>同时折叠所有条目的细则。</li>
<li>一键将关键词填入标题。如果有多个关键词则填入第一个。如上述示例中，“宝可梦”一词会被填入“Entry Title/Memo”栏。</li>
<li>重命名。上文已介绍。</li>
</ol>
<div class="admonition success">
<p class="admonition-title">至此，世界书的基础操作已经介绍完毕了！！！</p>
<p>然而——虽然世界书有助于剧情的补充和引导，但不一定保证你所设定的内容一定生成在角色的回复中。为了加强世界书的作用，以下是一些进阶的玩法。</p>
</div>
<h2 id="3">3. 进阶使用</h2>
<h3 id="31">3.1 上下文的概念</h3>
<p>在进阶教程之前，上下文 (Context) 是你必须知道的重要概念。你可以把上下文理解为“记忆”。</p>
<p>我们通常说 Claude 的记忆是100k 25k，就是指 Claude 的上下文容量为25k tokens。过多的 tokens 会被清出上下文，也就是我们常说的“记不住了”。</p>
<div class="admonition abstract">
<p class="admonition-title">提示</p>
<p>本章尽量解释清楚上下文的概念。如果你很清楚上下文的概念，请跳转至：<a href="https://sqivg8d05rm.feishu.cn/wiki/ZJ9Yw0X7JipJrlkAoT0cku54nMb#WxoudlSrRoq8DNxYSZrct6MSnig">条目参数</a>。如读完此篇仍对上下文有疑问，可结合此条目浏览：<a href="https://sqivg8d05rm.feishu.cn/wiki/UmWhwf6zviRZ7SkC1rhcIgFXnnd#Gs4KdDxuDogcVWxTrtvc5iBunn5">重要概念：上下文</a>。</p>
</div>
<h4 id="311-prompt">3.1.1 提示 (Prompt)</h4>
<p>我相信有的朋友并不知道 prompt 的概念。虽然 prompt 应该翻译为提示，不过我们一般仍称其为 prompt。</p>
<p>prompt 的作用是让 AI 按照用户输入的提示去输出内容。简而言之，基本上用户输入 AI 的任何信息都属于 prompt。</p>
<p>那么“<strong>用户输入 AI 的任何信息</strong>”包括什么呢？如果你使用 Claude 模型，那么在“预设”界面，你就可以看到它列出了默认的 prompts：</p>
<p><img alt="img" loading="lazy" src="17.jpeg" /></p>
<div class="admonition note">
<p class="admonition-title">蓝色部分</p>
<p>这一部分 prompt 是与角色扮演直接相关的。你可以在聊天过程中直观地感受，甚至修改这类 prompt。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">红色部分</p>
<p>这一部分 prompt 是与角色扮演间接相关的。虽然你多数时候无法在聊天过程中感受到这些 prompt，但是它们绝对地影响着<strong>聊天，如文笔、输出长度、是否允许色色、是否道歉等</strong>。</p>
</div>
<p>我不会在此过多地介绍这些 prompt。这里你需要记住的是：这些 prompt 是有<strong>上下顺序的。</strong></p>
<p><strong>它们之间的顺序排布并不是随意的。</strong></p>
<h4 id="312-prompt">3.1.2 Prompt 在上下文中的顺序</h4>
<p>通常，预设（或称破限）作者都会有一套经其测试的、证明好用的 prompt 顺序，并不一定总是上图的顺序。如果你并没有研究预设的打算，那么你只需要熟悉<strong>蓝色 prompt</strong> 的顺序即可，它们遵循以下规律：
顺序越靠下的 prompt，对你当前对话发挥的影响就越强！</p>
<p>由于本篇并不介绍破限，因此下文只介绍蓝色部分的 prompt。
让我用草图来告诉你它们是如何运作的。你可以先把<strong>上下文</strong>想象成<strong>一个容器</strong>：</p>
<p><img alt="img" loading="lazy" src="18.jpg" /></p>
<p>好，那么显而易见，随着你的聊天记录越来越多，就会有越来越多的内容被推出上下文。<strong>但是！</strong>SillyTavern 可以让一些重要内容不被推出去，于是就有了<strong>永久 prompt</strong> 和<strong>临时 prompt</strong> 之分：</p>
<table>
<thead>
<tr>
<th style="text-align: left;">永久 prompt：无论对话多长，也不会被推出上下文。 临时 prompt：对话长到一定程度后，就会被推出上下文。</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<p>（以下是不同 prompt 的属性表）</p>
<table>
<thead>
<tr>
<th style="text-align: left;">世界书（设置为常数：稍后会解释该功能） 永久 用户描述  永久 角色描述  永久 性格总结  永久 场景  永久 对话示例（除非被设置为永久） 临时 聊天记录  第一条消息 临时  用户和角色的对话 临时  作者注释 永久  通常我们不会写用户描述、性格总结和场景，或者不会在其中写太多内容。对话示例和绝大多数聊天记录，按照其属性，在长时间聊天后会被推出上下文。</th>
<th>作者注释： 这是一项把指定 prompt 插入聊天记录中指定位置的功能。插入深度为几，就把作者注释插入你和角色聊天的第几条消息之上（包含你刚发的消息、角色回复的消息、你发的消息）.</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>所以，<strong>聊天越来越长以后</strong>，不考虑用户描述、性格总结和场景的话，通常真正的上下文图大概长这样：</p>
<p><img alt="img" src="image33.gif" />
注：本“对话示例”指角色卡高级定义内的对话示例框</p>
<p>好，现在相信你已经对 prompt 的顺序有了初步的概念。鉴于本篇只是世界书教程，我仅在此点明：</p>
<p>Claude cookie 的上下文为 25k tokens，因此当聊天记录越来越长以后，你会发现无论是世界书，还是角色描述，都被挤在上下文的顶端，对你当前对话发挥的作用微乎其微。那么如果你希望某世界书条目发挥强效时，该怎么办呢？请继续阅读下文。</p>
<h3 id="32">3.2 <strong>条目参数</strong></h3>
<p>点击条目左侧小箭头，可以看到很多参数和选项。为了便于区别，我个人把这些区域的设置称为“条目参数”。</p>
<p><img alt="" src="lorebook/image34.gif" /></p>
<p>这里有几个我们上文未介绍的功能：<strong>插入位置</strong> (Position)、<strong>插入深度</strong> (Depth)、<strong>插入顺序</strong> (Order)、<strong>概率</strong> (Trigger %)、🟢<strong>状态</strong> (Status)、逻辑 (Logic)、筛选角色 (Filter to Characters)，以及排除角色 (Character Exclusion)。前五个功能较为常用。</p>
<p><img alt="" src="19.jpg" /></p>
<p>这里有几个我们上文未介绍的功能：<strong>插入位置</strong> (Position)、<strong>插入深度</strong> (Depth)、<strong>插入顺序</strong> (Order)、<strong>概率</strong> (Trigger %)、🟢<strong>状态</strong> (Status)、逻辑 (Logic)、筛选角色 (Filter to Characters)，以及排除角色 (Character Exclusion)。前五个功能较为常用。</p>
<p><img alt="" src="20.jpg" /></p>
<p>点击选项框，你会发现有五个选项（见下表）。如果你理解了上下文的概念，这些选项便非常容易理解。</p>
<p>|  名称 说明 发挥作用 备注 角色定义之前 将条目内容插入角色描述上方。 最弱 无 角色定义之后 将条目内容插入角色描述下方。 稍强于“角色定义之前”，但仍然很弱。 无 作者注释之前 将条目内容插入作者注释上方。 较强 跟随作者注释变动 作者注释之后 将条目内容插入作者注释下方。 极强。如果同时修改作者注释的插入深度，可以使世界书发挥最强作用。 跟随作者注释变动 @D 按插入深度插入。 可变 无  | </p>
<p><img alt="img" src="21.jpg" /></p>
<p>作者注释前后的世界书条目，其位置也是跟随作者注释的插入深度而变动的。比如你将作者注释的插入深度设置为0，将世界书设置为“作者注释之后”，那么该世界书的效力就是强中强。</p>
<div class="admonition warning">
<p class="admonition-title">注意</p>
<p><strong>上图描绘的仅是聊天记录很长时的情况。</strong>而在任何新对话开始时（聊天记录很短时），角色描述、角色描述前后的世界书、第一条消息，这三者对你的当前对话有着重要的影响，这种影响会像滚雪球一样在你的整个聊天过程中持续发挥作用。所以不要一股脑儿把所有世界书都放到作者注释前后</p>
</div>
<h4 id="322-depth">3.2.2 <strong>插入深度 (Depth)</strong></h4>
<p>在“插入位置”处选择“@D”后，“插入深度”下方就会出现一个文本框。你可以填入自定义数值。数值的意思同作者注释一样，指插入第 X 条消息的上方。</p>
<p><img alt="img" loading="lazy" src="22.jpg" /></p>
<p>插入深度 @D</p>
<h4 id="323-order">3.2.3 <strong>插入顺序 (Order)</strong></h4>
<p><strong>在插入位置相同的情况下</strong>，多个条目的内容同时被触发时，<strong>插入顺序数值越大的条目，会被插入越靠下的位置</strong>，对当前对话的影响效力越强。如果你不进行排序，那么这些条目会按照创建时间排序，这非常不便于管理。</p>
<p>举例来说，上图中的四个条目若<strong>同时</strong>被触发，在上下文中的顺序就是这样的：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>R288it 星球------------97
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>Zabra 星球-------------98
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>时空跃迁机及其制作步骤----99
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>NSFW Ali:Chat---------100
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>角色描述
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>……
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>聊天记录
</span></code></pre></div>
<p>注意<strong>若插入位置不同</strong>，则优先遵循插入位置：</p>
<p><img alt="im" src="24.jpg" /></p>
<p>上图中的七个条目若同时被触发，在上下文中的顺序就是这样的：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>R288it 星球------------97
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>Zabra 星球-------------98
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>时空跃迁机及其制作步骤----99
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>NSFW Ali:Chat---------100
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>角色描述
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>坎状态栏微调------------100
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>……
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>聊天记录
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>状态栏规则--------------99
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>NSFW PLists-----------100
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>作者注释
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>聊天记录 |
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">我该如何决定条目之间的顺序？</p>
<p>首先记住插入越靠下的位置，对当前对话的影响效力越强。作为一个创作者，你一定希望 AI 能牢记你给的所有信息，然而这是不现实的。以下是一些建议：</p>
<ul>
<li>
<p>把你的世界书条目按重要性排序，越重要、越希望 AI 牢记的内容放在越靠下的位置。 </p>
</li>
<li>
<p>一些对角色行动影响较小的世界背景，可以放在角色描述之前。</p>
</li>
<li>
<p>状态栏和状态栏规则放在靠下的位置。如果你的角色在聊天过程中会忘记状态栏，可以尝试把世界书的状态栏条目往下移。</p>
</li>
</ul>
</div>
<h4 id="324-trigger">3.2.4 <strong>概率 (Trigger %)</strong></h4>
<p>触发世界书的概率。比如设为50，那么每次输入关键词时，只有50%的概率使内容得到触发。（——理论上确实是这样，然而实际上，经常有一种“大概率触发小概率事件”的体验。所以该功能似乎并不完善。）</p>
<h4 id="325-status">3.2.5 <strong>状态 (Status)</strong></h4>
<p>点击🟢选项框，会发现有三个选项，以下是对它们功能的说明。</p>
<p>|  🟢 普通 正常地以关键词触发内容。 🔵 常数 不需要输入关键词，每次对话都会触发该条目内容，插入上下文。 ❌ 禁用 该条目无法被触发。  | 
| :---- | :---- |</p>
<div class="admonition note">
<p class="admonition-title">小贴士</p>
<p>还记得我在上面说过，世界书设置为常数以后，就变成永久 prompt 了吗？此时，若搭配插入深度使用，就可以使世界书发挥和作者注释相同的作用了！  |</p>
</div>
<h4 id="326">3.2.6 <strong>其他条目参数</strong></h4>
<p><strong>逻辑 (Logic)</strong></p>
<p>学过逻辑学或电路的同学对此一定不陌生：<strong>AND</strong>即<strong>与门</strong>，<strong>逗号</strong>即<strong>或门</strong>，<strong>NOT</strong>即<strong>非门</strong>。</p>
<p><img alt="img" src="25.jpg" /></p>
<p>在这个示例中：</p>
<ul>
<li>
<p><strong>选择 AND：</strong>只有对话中<strong>同时</strong>含有星球（<strong>或</strong>故乡）<strong>和</strong>小T（<strong>或</strong>兔子）时，内容才会被触发。</p>
</li>
<li>
<p><strong>选择 NOT：</strong>只有对话中含有星球（<strong>或</strong>故乡），<strong>且不含</strong>小T（<strong>或</strong>兔子）时，内容才会被触发。</p>
</li>
<li>
<p>大多数时候，右框不填写内容。</p>
</li>
</ul>
<p><strong>筛选角色 (Filter to Characters)</strong></p>
<p><img alt="img" loading="lazy" src="26.jpg" /></p>
<p>该功能极少使用。它主要适用于“全局世界书”+“群组聊天”的情况。</p>
<p>假设在群组聊天中，有一个信息是只有小 T 知道的，别人都不知道，那么就把小 T 加入到该条目的筛选角色中。群组中的其他人无法触发此条目。</p>
<p><strong>排除角色 (Character Exclusion)</strong></p>
<p>同上，该功能亦极少使用。点击右边方框可以切换到“排除角色”模式。</p>
<p>假设在群组聊天中，有一个信息是只有小 T 不知道的，别人都知道，那么就把小 T 加入到该条目的排除角色中。群组中的只有小 T 无法触发此条目。</p>
<h3 id="33">3.3 <strong>总体参数</strong></h3>
<p>点击 Activation Setting，可以看到很多参数和选项。为了便于区别，我个人把这个区域的设置称为“总体参数”。</p>
<p><img alt="img" src="27.jpg" /></p>
<h4 id="331">3.3.1 <strong>角色背景插入策略</strong></h4>
<p>一些情况下，我们在聊天时需要同时使用<strong>全局世界书</strong>与<strong>角色世界书</strong>。如果你希望两者对你当前对话的影响程度不同，那么你可能就需要选择采取下面的其中一种策略</p>
<ul>
<li>
<p>均匀排序 经我测试，这一功能非常乱，请尽量不要使用。在测试中，我发现越早创建的条目会被放在靠下的位置，而同时全局世界书会被整体放在角色世界书之下。</p>
</li>
<li>
<p>角色背景优先 角色世界书条目会放在全局世界书下面，它们内部再按照创建时间顺序排列</p>
</li>
<li>
<p>全局背景优先 角色世界书条目会放在全局世界书下面，它们内部再按照创建时间顺序排列。</p>
</li>
</ul>
<p>然而，插入顺序和插入位置的优先级是绝对大于该插入策略的，即，不管你在总体参数中怎么改“角色背景插入策略”，<strong>真正输出 prompt 仍旧看 <a href="https://sqivg8d05rm.feishu.cn/docx/P2QrdeUbToJMBYxeLCQcEBfLnGg#KRCqdE3r1ofl3QxntFYcnowKnkb">插入顺序</a> 和 <a href="https://sqivg8d05rm.feishu.cn/docx/P2QrdeUbToJMBYxeLCQcEBfLnGg#R3nzdMR3So6UeyxSQ8ac3Cqvnkg">插入位置</a></strong>。【插入顺序100的角色世界书条目】无论如何都在【插入顺序99的全局世界书】之下。所以我完全不推荐使用“角色背景插入策略”功能。</p>
<h4 id="332-scan-depth">3.3.2 <strong>扫描深度 (Scan Depth)</strong></h4>
<p>事实上，并不只有你发出的消息能触发世界书，聊天记录一样可以。聊天记录包括你发出的消息，以及角色回复的消息。</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>将扫描深度设为1，那么“你新发出的一条消息”+“角色最近回复的一条消息”中，如果含有关键词，就能够触发世界书。</p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>将“角色最近的回复”和“你新发出的消息”视为“一对”消息，扫描深度1则能扫描一对，扫描深度2则能扫描两对……以此类推，最大可以扫描十对消息——即20条聊天记录。</p>
</div>
<p>扫描深度通常设置为1或2。如果你玩/写的是冒险类的卡，可能会需要更高的扫描深度。（虽然滑块还能继续拉高，但酒馆作者自述最多十对，有待验证。）</p>
<h4 id="333-recursive-scanning">3.3.3 <strong>递归扫描 (Recursive scanning)</strong></h4>
<p>这应该是总体参数中最有用的一个功能。它的原理很简单：</p>
<p><strong>简而言之，递归扫描可以让你的世界书激活世界书</strong></p>
<p>可以直接用 SillyTavern 官方提供的例子：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>世界书条目 \#1
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>关键词：贝西
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>内容：贝西是一头奶牛，和鲁弗斯是朋友.
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>世界书条目 \#2
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>关键词：鲁弗斯
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>内容：鲁弗斯是一条狗
</span></code></pre></div>
<p>在开启递归扫描的情况下，世界书条目 #1内容中的“鲁弗斯”一词就会触发世界书条目 #2中的内容。关闭递归扫描则不会触发。</p>
<p>以下三个参数是关于用两种方式来限制世界书能使用的最大 tokens 的，不太常用。但萌新有时候会不知道如何解决相关报错，因此我在这里还是简单说明一下：</p>
<ul>
<li>
<p><strong>上下文百分比 (Content %)：</strong>限制世界书条目 tokens 占上下文上限的百分比。</p>
</li>
<li>
<p><strong>预算上限 (Budget Cap)：</strong>限制世界书条目于某个具体 tokens 数值内。设置为0则不生效。</p>
</li>
<li>
<p><strong>溢出警报 (Alert on overflow)：</strong>开关。超出 tokens 限制，就会发出报错。</p>
</li>
</ul>
<p>达到预算后会发生的事：</p>
<ul>
<li>
<p>所有条目按照一定的优先级次序被触发，优先级低的会被挤出预算。预算之外的条目，即使发出了关键词，也不会触发条目内容。</p>
</li>
<li>
<p>已知的一些规则：</p>
<ul>
<li>
<p>🔵常数条目优先于🟢普通条目.</p>
</li>
<li>
<p>“插入顺序”数值高的条目优先于数值低的条目。</p>
</li>
<li>
<p>直接提及关键词的条目优先于递归扫描的条目。</p>
</li>
</ul>
</li>
</ul>
<h4 id="335">3.3.5 <strong>其他总体参数</strong></h4>
<ul>
<li>
<p><strong>区分大小写 (Case-sensitive keys)：</strong>开启后，对话中的单词和世界书中的关键词大小写必须一致，才能触发。比如 Rose（人名）和 rose（玫瑰）。主要针对英文。</p>
</li>
<li>
<p><strong>匹配整个单词 (Match whole words)：</strong>开启后，只有相同的完整单词才能触发。比如对话中的 hotdog 无法触发关键词为 dog 的世界书。主要针对英文</p>
</li>
<li>
<p><strong>最小激活次数 (Min Activations)</strong></p>
</li>
</ul>
<p>在上文中，有一种扫描消息条数的扫描方式：扫描深度。而最小激活次数提供了另外一种扫描方式：</p>
<p><strong>直接扫描关键词。</strong>你设置了次数后，该功能会从你的最新一条消息开始，从下往上扫描聊天记录，扫描到指定次数的（任意）关键词才会停下。但该功能并不好用。由于可能在某条消息内多次出现某关键词，导致次数耗尽，因此极少使用。次数也受“最大深度”和“预算上限”的限制。设置为0则关闭该功能。</p>
<h3 id="34">3.4 <strong>搭配正则表达式</strong></h3>
<p>该功能，简而言之，是以“好感度系统”为目的的一种玩法。比如，某角色对玩家的好感度达到几后，会表现出不同的性格，或者传达出更亲密的信息。实际上，任何“分阶段”的玩法都可以采用这个功能。详看👇</p>
<p><a href="https://sqivg8d05rm.feishu.cn/wiki/CINmw1U6gihSDYkrvBicCFZAnHd">如何用正则表达式来自动触发世界书以节省token</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.top", "navigation.indexes", "search.suggest", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>